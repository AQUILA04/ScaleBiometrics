# Story 1.1: Project Scaffolding & Monorepo Setup

**Status:** Approved

## Story
**As a** Lead Developer,
**I want** to initialize the monorepo structure and local infrastructure stack,
**so that** the team can start developing with a production-like environment including observability.

## Acceptance Criteria
1. **Monorepo Structure**: Root initialized with `apps/api`, `apps/web`, `apps/worker`, `packages/biometric-core`, `infrastructure`.
2. **Java 21 (LTS)**: Strict enforcement of Java 21 in `pom.xml`/`build.gradle` (Required for Virtual Threads & Panama API).
3. **Backend Scaffold**: Spring Boot 3.4+ initialized in `apps/api` and `apps/worker`.
4. **Frontend Scaffold**: Next.js 14+ in `apps/web`.
5. **Infrastructure as Code (Local)**: `docker-compose.yml` must include:
    - **Core**: Postgres 16, Keycloak 26.1.5, Kafka 3.6, MinIO, Redis.
    - **Observability**: Jaeger (Tracing), Prometheus (Metrics), Grafana (Dashboards).
6. **Shared Configuration**: Maven multi-module setup or Gradle Composite build.

## Tasks / Subtasks
- [ ] **Repository & Modules**
    - [ ] `git init` & standard structure.
    - [ ] Create shared module `packages/biometric-core`.
- [ ] **Infrastructure Setup**
    - [ ] Configure `docker-compose.yml` with all services.
    - [ ] Configure `prometheus.yml` to scrape Spring Boot apps.
    - [ ] Configure Keycloak Realm import script.
- [ ] **Backend Setup**
    - [ ] Setup `apps/api` (Gateway).
    - [ ] Setup `apps/worker` (Matcher Node).
    - [ ] Setup `apps/master` (Orchestrator).
- [ ] **Verification**
    - [ ] `docker-compose up` runs successfully.
    - [ ] Access Jaeger UI (http://localhost:16686).
    - [ ] Access Grafana (http://localhost:3000).

## Dev Notes
* **Memory**: Ensure Docker has enough RAM allocated (min 8GB recommended for this stack).
* **Ports**: Map Jaeger UI to 16686, Prometheus to 9090, Web(3000), API(8081), PG(5432), KC(8080/8180), MinIO(9000).